/*! For license information please see 382.b1f8177aa06c45bc792f.js.LICENSE.txt */
"use strict";(self.webpackChunkknockoffarcade_enterprise=self.webpackChunkknockoffarcade_enterprise||[]).push([[382],{382:(e,t,a)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}a.r(t),a.d(t,{KnockoffArcade:()=>E,default:()=>B});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageKey="knockoffarcade_highscores",this.maxScores=10,this.highScores=this.loadHighScores()},(t=[{key:"loadHighScores",value:function(){try{var e=localStorage.getItem(this.storageKey);if(e)return JSON.parse(e)}catch(t){}return[{name:"Billy the Kid",score:5e4,level:10,date:"2024-01-01"},{name:"Jesse James",score:4e4,level:9,date:"2024-01-01"},{name:"Wyatt Earp",score:3e4,level:8,date:"2024-01-01"},{name:"Doc Holliday",score:25e3,level:7,date:"2024-01-01"},{name:"Wild Bill",score:2e4,level:6,date:"2024-01-01"},{name:"Calamity Jane",score:15e3,level:5,date:"2024-01-01"},{name:"Buffalo Bill",score:1e4,level:4,date:"2024-01-01"},{name:"Annie Oakley",score:7500,level:3,date:"2024-01-01"},{name:"Butch Cassidy",score:5e3,level:3,date:"2024-01-01"},{name:"Sundance Kid",score:2500,level:2,date:"2024-01-01"}]}},{key:"saveHighScores",value:function(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.highScores))}catch(e){}}},{key:"isHighScore",value:function(e){return this.highScores.length<this.maxScores||e>this.highScores[this.highScores.length-1].score}},{key:"getRank",value:function(e){for(var t=0;t<this.highScores.length;t++)if(e>this.highScores[t].score)return t+1;return this.highScores.length<this.maxScores?this.highScores.length+1:-1}},{key:"addHighScore",value:function(e,t,a){for(var i={name:e.substring(0,20),score:t,level:a,date:(new Date).toISOString().split("T")[0]},n=this.highScores.length,r=0;r<this.highScores.length;r++)if(t>this.highScores[r].score){n=r;break}return this.highScores.splice(n,0,i),this.highScores.length>this.maxScores&&(this.highScores=this.highScores.slice(0,this.maxScores)),this.saveHighScores(),n+1}},{key:"getHighScores",value:function(){return n(this.highScores)}},{key:"clearHighScores",value:function(){this.highScores=[],this.saveHighScores()}},{key:"formatScore",value:function(e){return e.toLocaleString()}},{key:"generateHighScoresHTML",value:function(){var e=this;if(0===this.highScores.length)return'<p style="text-align: center; color: #8b4513;">No high scores yet!</p>';var t='<table style="width: 100%; border-collapse: collapse;">';return t+='<thead><tr style="border-bottom: 2px solid #8b4513;">',t+='<th style="text-align: left; padding: 8px; color: #8b4513;">Rank</th>',t+='<th style="text-align: left; padding: 8px; color: #8b4513;">Name</th>',t+='<th style="text-align: right; padding: 8px; color: #8b4513;">Score</th>',t+='<th style="text-align: center; padding: 8px; color: #8b4513;">Level</th>',t+="</tr></thead><tbody>",this.highScores.forEach(function(a,i){t+='<tr style="border-bottom: 1px solid #deb887;">',t+='<td style="padding: 8px; color: #5d4037;">'.concat(0===i?"\ud83e\udd47":1===i?"\ud83e\udd48":2===i?"\ud83e\udd49":""," ").concat(i+1,"</td>"),t+='<td style="padding: 8px; color: #5d4037; font-weight: bold;">'.concat(a.name,"</td>"),t+='<td style="padding: 8px; text-align: right; color: #8b4513; font-weight: bold;">'.concat(e.formatScore(a.score),"</td>"),t+='<td style="padding: 8px; text-align: center; color: #5d4037;">'.concat(a.level,"</td>"),t+="</tr>"}),t+="</tbody></table>"}}])&&s(e.prototype,t),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){var e,t,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function r(a,i,n,r){var c=i&&i.prototype instanceof o?i:o,l=Object.create(c.prototype);return h(l,"_invoke",function(a,i,n){var r,o,c,l=0,u=n||[],h=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,a){return r=t,o=0,c=e,p.n=a,s}};function d(a,i){for(o=a,c=i,t=0;!h&&l&&!n&&t<u.length;t++){var n,r=u[t],d=p.p,m=r[2];a>3?(n=m===i)&&(c=r[(o=r[4])?5:(o=3,3)],r[4]=r[5]=e):r[0]<=d&&((n=a<2&&d<r[1])?(o=0,p.v=i,p.n=r[1]):d<m&&(n=a<3||r[0]>i||i>m)&&(r[4]=a,r[5]=i,p.n=m,o=0))}if(n||a>1)return s;throw h=!0,i}return function(n,u,m){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&d(u,m),o=u,c=m;(t=o<2?e:c)||!h;){r||(o?o<3?(o>1&&(p.n=-1),d(o,c)):p.n=c:p.v=c);try{if(l=2,r){if(o||(n="next"),t=r[n]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=r.return)&&t.call(r),o<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),o=1);r=e}else if((t=(h=p.n<0)?c:a.call(i,p))!==s)break}catch(t){r=e,o=1,c=t}finally{l=1}}return{value:t,done:h}}}(a,n,r),!0),l}var s={};function o(){}function c(){}function l(){}t=Object.getPrototypeOf;var p=[][i]?t(t([][i]())):(h(t={},i,function(){return this}),t),d=l.prototype=o.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,h(e,n,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,h(d,"constructor",l),h(l,"constructor",c),c.displayName="GeneratorFunction",h(l,n,"GeneratorFunction"),h(d),h(d,n,"Generator"),h(d,i,function(){return this}),h(d,"toString",function(){return"[object Generator]"}),(u=function(){return{w:r,m:m}})()}function h(e,t,a,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}h=function(e,t,a,i){function r(t,a){h(e,t,function(e){return this._invoke(t,a,e)})}t?n?n(e,t,{value:a,enumerable:!i,configurable:!i,writable:!i}):e[t]=a:(r("next",0),r("throw",1),r("return",2))},h(e,t,a,i)}function p(e,t,a,i,n,r,s){try{var o=e[r](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(i,n)}function d(e){return function(){var t=this,a=arguments;return new Promise(function(i,n){var r=e.apply(t,a);function s(e){p(r,i,n,s,o,"next",e)}function o(e){p(r,i,n,s,o,"throw",e)}s(void 0)})}}function m(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var f=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sounds=new Map,this.context=null,this.masterVolume=.7,this.sfxVolume=.8,this.musicVolume=.4,this.isInitialized=!1,this.isMuted=!1,this.userHasInteracted=!1,this.hasPlayedFirstTrack=!1,this.backgroundMusic=null,this.spikeMusic=null,this.currentMusic=null,this.musicGain=null,this.currentMusicSource=null,this.soundDefinitions={paddleHit:{type:"gunshot",duration:.15,volume:.8,envelope:{attack:.001,decay:.05,sustain:.1,release:.094}},brickBreak1:{type:"spittoon",frequency:800,duration:.2,volume:.7,envelope:{attack:.01,decay:.1,sustain:.3,release:.09}},brickBreak2:{type:"spittoon",frequency:600,duration:.18,volume:.6,envelope:{attack:.01,decay:.08,sustain:.4,release:.09}},brickBreak3:{type:"spittoon",frequency:400,duration:.22,volume:.5,envelope:{attack:.01,decay:.12,sustain:.5,release:.08}},powerUpCollect:{type:"saloon_door",startFreq:200,endFreq:150,duration:.4,volume:.6,envelope:{attack:.05,decay:.1,sustain:.7,release:.25}},ballLost:{type:"whistle_down",startFreq:800,endFreq:200,duration:.8,volume:.8,envelope:{attack:.1,decay:.2,sustain:.4,release:.3}},levelComplete:{type:"harmonica",notes:[392,440,523,659,784],duration:1.2,volume:.7,envelope:{attack:.1,decay:.05,sustain:.8,release:.05}},gameOver:{type:"western_chord",chords:[[220,277,330],[196,247,294],[175,220,262]],duration:1.5,volume:.9,envelope:{attack:.2,decay:.3,sustain:.6,release:.4}},combo3:{type:"yeehaw",formants:[800,1200,2500],duration:.3,volume:.5,envelope:{attack:.02,decay:.1,sustain:.6,release:.18}},combo5:{type:"yeehaw",formants:[600,1e3,2200],duration:.4,volume:.6,envelope:{attack:.02,decay:.1,sustain:.7,release:.28}},combo10:{type:"yeehaw_big",formants:[500,900,2e3],duration:.6,volume:.8,envelope:{attack:.02,decay:.1,sustain:.8,release:.48}},menuSelect:{type:"spur",frequency:1200,duration:.1,volume:.4,envelope:{attack:.01,decay:.03,sustain:.2,release:.06}},menuConfirm:{type:"whinny",startFreq:400,endFreq:800,duration:.25,volume:.5,envelope:{attack:.02,decay:.08,sustain:.4,release:.15}}}},t=[{key:"initializeAudio",value:function(){var e=d(u().m(function e(){var t;return u().w(function(e){for(;;)switch(e.n){case 0:try{t=window.AudioContext||window.webkitAudioContext,this.context=new t,this.masterGain=this.context.createGain(),this.masterGain.gain.value=this.masterVolume,this.masterGain.connect(this.context.destination),this.musicGain=this.context.createGain(),this.musicGain.gain.value=this.musicVolume,this.musicGain.connect(this.masterGain),this.isInitialized=!0}catch(a){this.isInitialized=!1}case 1:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resumeContext",value:function(){var e=d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:if(!this.context||"suspended"!==this.context.state){e.n=1;break}return e.n=1,this.context.resume();case 1:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"playSound",value:function(){var e=d(u().m(function e(t){var a,i,n,r,s,o=arguments;return u().w(function(e){for(;;)switch(e.n){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:{},this.userHasInteracted){e.n=1;break}return e.a(2);case 1:if(this.isInitialized){e.n=2;break}return e.n=2,this.initializeAudio();case 2:if(this.isInitialized&&!this.isMuted&&this.context){e.n=3;break}return e.a(2);case 3:return e.n=4,this.resumeContext();case 4:if(i=this.soundDefinitions[t]){e.n=5;break}return e.a(2);case 5:n=(a.volume||i.volume)*this.sfxVolume,r=this.context.currentTime,s=i.type,e.n="gunshot"===s?6:"spittoon"===s?7:"saloon_door"===s?8:"whistle_down"===s?9:"harmonica"===s?10:"western_chord"===s?11:"yeehaw"===s?12:"yeehaw_big"===s?13:"spur"===s?14:"whinny"===s?15:16;break;case 6:return this.playGunshot(i,n,r),e.a(3,16);case 7:return this.playSpittoon(i,n,r),e.a(3,16);case 8:return this.playSaloonDoor(i,n,r),e.a(3,16);case 9:return this.playWhistleDown(i,n,r),e.a(3,16);case 10:return this.playHarmonica(i,n,r),e.a(3,16);case 11:return this.playWesternChord(i,n,r),e.a(3,16);case 12:return this.playYeehaw(i,n,r),e.a(3,16);case 13:return this.playYeehawBig(i,n,r),e.a(3,16);case 14:return this.playSpur(i,n,r),e.a(3,16);case 15:return this.playWhinny(i,n,r),e.a(3,16);case 16:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"playGunshot",value:function(e,t,a){this.createGunshotBang(t,a),this.createGunshotEcho(.4*t,a+.1),this.createRicochet(.6*t,a+.05)}},{key:"createGunshotBang",value:function(e,t){for(var a=.1*this.context.sampleRate,i=this.context.createBuffer(1,a,this.context.sampleRate),n=i.getChannelData(0),r=0;r<a;r++){var s=r/a,o=Math.exp(50*-s)*(1-s),c=2*Math.random()-1,l=Math.sin(s*Math.PI*200)*Math.exp(30*-s);n[r]=(.7*c+.3*l)*o}var u=this.context.createBufferSource(),h=this.context.createBiquadFilter(),p=this.context.createGain();u.buffer=i,h.type="highpass",h.frequency.setValueAtTime(400,t),h.Q.setValueAtTime(1,t),p.gain.setValueAtTime(e,t),p.gain.exponentialRampToValueAtTime(.001,t+.1),u.connect(h),h.connect(p),p.connect(this.masterGain),u.start(t)}},{key:"createGunshotEcho",value:function(e,t){var a=this.context.createDelay(.5),i=this.context.createGain(),n=this.context.createGain();a.delayTime.setValueAtTime(.15,t),i.gain.setValueAtTime(.3,t),n.gain.setValueAtTime(e,t);var r=this.context.createOscillator(),s=this.context.createGain();r.type="sawtooth",r.frequency.setValueAtTime(100,t),r.frequency.linearRampToValueAtTime(50,t+.8),s.gain.setValueAtTime(0,t),s.gain.linearRampToValueAtTime(.3*e,t+.1),s.gain.exponentialRampToValueAtTime(.001,t+.8),r.connect(s),s.connect(a),a.connect(i),i.connect(a),a.connect(n),n.connect(this.masterGain),r.start(t),r.stop(t+.8)}},{key:"createRicochet",value:function(e,t){var a=this.context.createOscillator(),i=this.context.createGain();a.type="sine",a.frequency.setValueAtTime(800,t),a.frequency.exponentialRampToValueAtTime(200,t+.4),a.frequency.linearRampToValueAtTime(150,t+.6),i.gain.setValueAtTime(0,t),i.gain.linearRampToValueAtTime(e,t+.05),i.gain.exponentialRampToValueAtTime(.001,t+.6),a.connect(i),i.connect(this.masterGain),a.start(t),a.stop(t+.6)}},{key:"playSpittoon",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain(),r=this.context.createBiquadFilter();i.type="triangle",i.frequency.setValueAtTime(e.frequency,a),i.frequency.exponentialRampToValueAtTime(.7*e.frequency,a+e.duration),r.type="peaking",r.frequency.setValueAtTime(2*e.frequency,a),r.Q.setValueAtTime(15,a),r.gain.setValueAtTime(6,a),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(r),r.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playSweep",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain();i.type="sawtooth",i.frequency.setValueAtTime(e.startFreq,a),i.frequency.linearRampToValueAtTime(e.endFreq,a+e.duration),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playDescending",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain();i.type="triangle",i.frequency.setValueAtTime(e.startFreq,a),i.frequency.exponentialRampToValueAtTime(e.endFreq,a+e.duration),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playMelody",value:function(e,t,a){this.playHarmonica(e,t,a)}},{key:"playDramatic",value:function(e,t,a){this.playWesternChord(e,t,a)}},{key:"playRising",value:function(e,t,a){this.playWhinny(e,t,a)}},{key:"playBlip",value:function(e,t,a){this.playSpur(e,t,a)}},{key:"playConfirm",value:function(e,t,a){this.playWhinny(e,t,a)}},{key:"playSaloonDoor",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain();i.type="sawtooth",i.frequency.setValueAtTime(e.startFreq,a),i.frequency.linearRampToValueAtTime(e.endFreq,a+.3*e.duration),i.frequency.setValueAtTime(e.endFreq,a+.3*e.duration),i.frequency.linearRampToValueAtTime(.9*e.startFreq,a+e.duration),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playWhistleDown",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain();i.type="sine",i.frequency.setValueAtTime(e.startFreq,a),i.frequency.exponentialRampToValueAtTime(e.endFreq,a+e.duration),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playHarmonica",value:function(e,t,a){var i=this,n=e.duration/e.notes.length;e.notes.forEach(function(e,r){var s=a+r*n;i.createHarmonicaNote(e,.8*t,s,n)})}},{key:"createHarmonicaNote",value:function(e,t,a,i){var n=this.context.createOscillator(),r=this.context.createOscillator(),s=this.context.createOscillator(),o=this.context.createOscillator(),c=this.context.createGain(),l=this.context.createBiquadFilter(),u=this.context.createGain();n.type="sawtooth",n.frequency.setValueAtTime(e,a),n.frequency.linearRampToValueAtTime(.98*e,a+.05),n.frequency.linearRampToValueAtTime(e,a+.1),r.type="triangle",r.frequency.setValueAtTime(2*e,a),s.type="sine",s.frequency.setValueAtTime(3*e,a),o.type="sine",o.frequency.setValueAtTime(5.5,a),c.gain.setValueAtTime(.02*e,a),o.connect(c),c.connect(n.frequency),c.connect(r.frequency),l.type="bandpass",l.frequency.setValueAtTime(2*e,a),l.Q.setValueAtTime(3,a);var h=this.context.createGain(),p=this.context.createGain(),d=this.context.createGain();p.gain.setValueAtTime(.3,a),d.gain.setValueAtTime(.15,a),n.connect(h),r.connect(p),p.connect(h),s.connect(d),d.connect(h),h.connect(l),l.connect(u),u.connect(this.masterGain),u.gain.setValueAtTime(0,a),u.gain.linearRampToValueAtTime(t,a+.1),u.gain.setValueAtTime(.9*t,a+.7*i),u.gain.linearRampToValueAtTime(.3*t,a+.9*i),u.gain.exponentialRampToValueAtTime(.001,a+i),n.start(a),r.start(a),s.start(a),o.start(a),n.stop(a+i),r.stop(a+i),s.stop(a+i),o.stop(a+i)}},{key:"playWesternChord",value:function(e,t,a){var i=this,n=e.duration/e.chords.length;e.chords.forEach(function(r,s){var o=a+s*n;r.forEach(function(a,s){var c=i.context.createOscillator(),l=i.context.createGain();c.type="sawtooth",c.frequency.setValueAtTime(a,o);var u=t/r.length;i.applyEnvelope(l.gain,e.envelope,u,o,n),c.connect(l),l.connect(i.masterGain),c.start(o),c.stop(o+n)})})}},{key:"playYeehaw",value:function(e,t,a){var i=this;e.formants.forEach(function(n,r){var s=i.context.createOscillator(),o=i.context.createBiquadFilter(),c=i.context.createGain();s.type="sawtooth",s.frequency.setValueAtTime(150+50*r,a),o.type="peaking",o.frequency.setValueAtTime(n,a),o.Q.setValueAtTime(5,a),o.gain.setValueAtTime(10,a);var l=t/e.formants.length;i.applyEnvelope(c.gain,e.envelope,l,a,e.duration),s.connect(o),o.connect(c),c.connect(i.masterGain),s.start(a),s.stop(a+e.duration)})}},{key:"playYeehawBig",value:function(e,t,a){var i=this;e.formants.forEach(function(n,r){var s=i.context.createOscillator(),o=i.context.createOscillator(),c=i.context.createGain(),l=i.context.createBiquadFilter(),u=i.context.createGain();s.type="sawtooth";var h=120+60*r;s.frequency.setValueAtTime(h,a),o.type="sine",o.frequency.setValueAtTime(5,a),c.gain.setValueAtTime(10,a),o.connect(c),c.connect(s.frequency),l.type="peaking",l.frequency.setValueAtTime(n,a),l.Q.setValueAtTime(8,a),l.gain.setValueAtTime(15,a);var p=t/e.formants.length;i.applyEnvelope(u.gain,e.envelope,p,a,e.duration),s.connect(l),l.connect(u),u.connect(i.masterGain),s.start(a),o.start(a),s.stop(a+e.duration),o.stop(a+e.duration)})}},{key:"playSpur",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createGain();i.type="triangle",i.frequency.setValueAtTime(e.frequency,a),i.frequency.linearRampToValueAtTime(1.2*e.frequency,a+.3*e.duration),i.frequency.linearRampToValueAtTime(e.frequency,a+e.duration),this.applyEnvelope(n.gain,e.envelope,t,a,e.duration),i.connect(n),n.connect(this.masterGain),i.start(a),i.stop(a+e.duration)}},{key:"playWhinny",value:function(e,t,a){this.createWhinnyCall(e,t,a),this.createWhinnyBreathe(.6*t,a+.1),this.createWhinnyTail(.4*t,a+.7*e.duration)}},{key:"createWhinnyCall",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createOscillator(),r=this.context.createBiquadFilter(),s=this.context.createGain();i.type="sawtooth",n.type="triangle",i.frequency.setValueAtTime(e.startFreq,a),i.frequency.linearRampToValueAtTime(e.endFreq,a+.1),i.frequency.linearRampToValueAtTime(.7*e.startFreq,a+.15),i.frequency.linearRampToValueAtTime(1.2*e.endFreq,a+.2),i.frequency.exponentialRampToValueAtTime(.6*e.startFreq,a+e.duration),n.frequency.setValueAtTime(1.02*e.startFreq,a),n.frequency.linearRampToValueAtTime(1.02*e.endFreq,a+.1),n.frequency.linearRampToValueAtTime(.72*e.startFreq,a+.15),n.frequency.linearRampToValueAtTime(1.22*e.endFreq,a+.2),n.frequency.exponentialRampToValueAtTime(.62*e.startFreq,a+e.duration),r.type="lowpass",r.frequency.setValueAtTime(800,a),r.frequency.linearRampToValueAtTime(1200,a+.1),r.frequency.linearRampToValueAtTime(600,a+e.duration),r.Q.setValueAtTime(2,a),s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(t,a+.03),s.gain.setValueAtTime(.8*t,a+.1),s.gain.linearRampToValueAtTime(.9*t,a+.15),s.gain.setValueAtTime(.6*t,a+.2),s.gain.exponentialRampToValueAtTime(.001,a+e.duration),i.connect(r),n.connect(r),r.connect(s),s.connect(this.masterGain),i.start(a),n.start(a),i.stop(a+e.duration),n.stop(a+e.duration)}},{key:"createWhinnyBreathe",value:function(e,t){for(var a=.15*this.context.sampleRate,i=this.context.createBuffer(1,a,this.context.sampleRate),n=i.getChannelData(0),r=0;r<a;r++){var s=r/a,o=.7*Math.sin(s*Math.PI);n[r]=(2*Math.random()-1)*o}var c=this.context.createBufferSource(),l=this.context.createBiquadFilter(),u=this.context.createGain();c.buffer=i,l.type="bandpass",l.frequency.setValueAtTime(300,t),l.Q.setValueAtTime(.5,t),u.gain.setValueAtTime(e,t),c.connect(l),l.connect(u),u.connect(this.masterGain),c.start(t)}},{key:"createWhinnyTail",value:function(e,t){var a=this.context.createOscillator(),i=this.context.createGain();a.type="sine",a.frequency.setValueAtTime(200,t),a.frequency.exponentialRampToValueAtTime(120,t+.3),i.gain.setValueAtTime(0,t),i.gain.linearRampToValueAtTime(e,t+.05),i.gain.exponentialRampToValueAtTime(.001,t+.3),a.connect(i),i.connect(this.masterGain),a.start(t),a.stop(t+.3)}},{key:"applyEnvelope",value:function(e,t,a,i,n){var r=t.attack,s=t.decay,o=t.sustain,c=t.release,l=a*o;e.setValueAtTime(0,i),e.linearRampToValueAtTime(a,i+r),e.linearRampToValueAtTime(l,i+r+s),e.setValueAtTime(l,i+n-c),e.exponentialRampToValueAtTime(.001,i+n)}},{key:"playBrickBreak",value:function(){var e=["brickBreak1","brickBreak2","brickBreak3"],t=e[Math.floor(Math.random()*e.length)];this.playSound(t)}},{key:"playComboSound",value:function(e){e>=10?this.playSound("combo10"):e>=5?this.playSound("combo5"):e>=3&&this.playSound("combo3")}},{key:"startBackgroundMusic",value:function(){var e=d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:if(this.userHasInteracted=!0,this.isInitialized){e.n=1;break}return e.n=1,this.initializeAudio();case 1:this.musicFiles||(this.musicFiles=["./assets/sounds/harmonica 1 tunes - bar 141 - Eitan Epstein Music - main.wav","./assets/sounds/The Western short version.wav","./assets/sounds/Western.mp3","./assets/sounds/Western (Full Version).mp3","./assets/sounds/Country Western/Country Western 01.mp3","./assets/sounds/Country/Country.mp3","./assets/sounds/Country Ways.mp3","./assets/sounds/Lady Fortune.mp3","./assets/sounds/Traveling Through.mp3","./assets/sounds/CountryHoedown_96_JHungerX.wav","./assets/sounds/Funny Country.wav","./assets/sounds/Uplifting Country 2.wav","./assets/sounds/acd c tunes 02a - bar 1225 - eitan-ep - main.wav"],this.currentTrackIndex=0),this.currentMusic={melody:"audio_files",type:"background",startTime:this.context.currentTime},this.playNextAudioTrack();case 2:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startSpikeMusic",value:function(){}},{key:"playNextAudioTrack",value:function(){var e=d(u().m(function e(){var t,a,i,n,r,s,o,c,l=this;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isInitialized&&!this.isMuted&&this.currentMusic){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this.resumeContext();case 2:return t=this.musicFiles[this.currentTrackIndex%this.musicFiles.length],e.n=3,fetch(t);case 3:if((a=e.v).ok){e.n=4;break}throw new Error("Failed to fetch ".concat(t,": ").concat(a.status));case 4:return e.n=5,a.arrayBuffer();case 5:return i=e.v,e.n=6,this.context.decodeAudioData(i);case 6:n=e.v,(r=this.context.createBufferSource()).buffer=n,this.currentMusicSource=r,s=this.context.createGain(),r.connect(s),s.connect(this.musicGain),(o=!this.hasPlayedFirstTrack)&&(this.hasPlayedFirstTrack=!0),o?(s.gain.setValueAtTime(0,this.context.currentTime),s.gain.linearRampToValueAtTime(1,this.context.currentTime+3)):s.gain.setValueAtTime(1,this.context.currentTime),r.start(0),c=n.duration,setTimeout(function(){l.currentMusic&&"audio_files"===l.currentMusic.melody&&(l.currentTrackIndex++,setTimeout(function(){l.currentMusic&&"audio_files"===l.currentMusic.melody&&l.playNextAudioTrack()},2e3))},1e3*c),e.n=8;break;case 7:e.p=7,e.v,setTimeout(function(){l.currentMusic&&"audio_files"===l.currentMusic.melody&&(l.currentTrackIndex++,l.playNextAudioTrack())},3e3);case 8:return e.a(2)}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"playMelodyInternal",value:function(e,t,a){var i=this;if(this.isInitialized&&this.currentMusic)if(t>=e.length)setTimeout(function(){i.currentMusic&&i.currentMusic.melody===e&&i.playMelodyInternal(e,0,i.context.currentTime+1.5)},1500);else{var n=e[t];0!==n.note?(this.playWesternMelodyNote(n.note,n.duration,a),this.playWesternHarmony(n.note,n.duration,a),setTimeout(function(){i.currentMusic&&i.currentMusic.melody===e&&i.playMelodyInternal(e,t+1,a+n.duration)},1e3*n.duration)):setTimeout(function(){i.currentMusic&&i.currentMusic.melody===e&&i.playMelodyInternal(e,t+1,a+n.duration)},1e3*n.duration)}}},{key:"playWesternMelodyNote",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createOscillator(),r=this.context.createBiquadFilter(),s=this.context.createGain();i.type="sawtooth",i.frequency.setValueAtTime(e,a),n.type="triangle",n.frequency.setValueAtTime(2*e,a),r.type="lowpass",r.frequency.setValueAtTime(4*e,a),r.Q.setValueAtTime(1,a);var o=this.context.createGain();o.gain.setValueAtTime(.3,a),i.connect(r),n.connect(o),o.connect(r),r.connect(s),s.connect(this.musicGain),s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.4*this.musicVolume,a+.1),s.gain.setValueAtTime(.35*this.musicVolume,a+.7*t),s.gain.exponentialRampToValueAtTime(.001,a+t),i.start(a),n.start(a),i.stop(a+t),n.stop(a+t)}},{key:"playWesternHarmony",value:function(e,t,a){var i=.75*e,n=this.context.createOscillator(),r=this.context.createGain();n.type="sine",n.frequency.setValueAtTime(i,a),r.gain.setValueAtTime(0,a),r.gain.linearRampToValueAtTime(.15*this.musicVolume,a+.2),r.gain.setValueAtTime(.1*this.musicVolume,a+.8*t),r.gain.exponentialRampToValueAtTime(.001,a+t),n.connect(r),r.connect(this.musicGain),n.start(a),n.stop(a+t)}},{key:"playRandomChords",value:function(){var e=this;if(this.isInitialized&&this.currentMusic&&!this.isMuted){var t=this.westernChords[Math.floor(Math.random()*this.westernChords.length)];this.playAcousticGuitar(t,2,this.context.currentTime),this.playUprigthBass(t,2,this.context.currentTime),this.playBanjo(t,2,this.context.currentTime+.1),this.playFiddle(t,2,this.context.currentTime+.3),this.playSimpleDrums(2,this.context.currentTime),setTimeout(function(){e.currentMusic&&"random_chords"===e.currentMusic.melody&&e.playRandomChords()},2e3)}}},{key:"playAcousticGuitar",value:function(e,t,a){var i=this;[0,.25,.5,.75,1,1.25,1.5,1.75].forEach(function(t,n){var r=a+t,s=n%2===0;e.notes.forEach(function(e,t){var a=r+.01*t,n=i.context.createOscillator(),o=i.context.createGain(),c=i.context.createBiquadFilter();n.type="sawtooth",n.frequency.setValueAtTime(e,a),c.type="lowpass",c.frequency.setValueAtTime(4*e,a),c.Q.setValueAtTime(.7,a);var l=.15*i.musicVolume*(s?1:.7);o.gain.setValueAtTime(0,a),o.gain.linearRampToValueAtTime(l,a+.02),o.gain.exponentialRampToValueAtTime(.001,a+.4),n.connect(c),c.connect(o),o.connect(i.musicGain),n.start(a),n.stop(a+.4)})})}},{key:"playUprigthBass",value:function(e,t,a){var i=this,n=[e.bass,1.25*e.bass,1.5*e.bass,1.25*e.bass],r=t/4;n.forEach(function(e,t){var n=a+t*r,s=i.context.createOscillator(),o=i.context.createGain(),c=i.context.createBiquadFilter();s.type="triangle",s.frequency.setValueAtTime(e,n),c.type="lowpass",c.frequency.setValueAtTime(3*e,n),c.Q.setValueAtTime(1.2,n);var l=.25*i.musicVolume;o.gain.setValueAtTime(0,n),o.gain.linearRampToValueAtTime(l,n+.05),o.gain.setValueAtTime(.6*l,n+.8*r),o.gain.exponentialRampToValueAtTime(.001,n+r),s.connect(c),c.connect(o),o.connect(i.musicGain),s.start(n),s.stop(n+r)})}},{key:"playBanjo",value:function(e,t,a){for(var i=[0,2,1,2,0,2,1,2],n=t/16,r=0;r<16;r++)if(Math.random()<.7){var s=a+r*n,o=i[r%i.length],c=e.notes[o]*(1+.5*Math.random()),l=this.context.createOscillator(),u=this.context.createGain(),h=this.context.createBiquadFilter();l.type="square",l.frequency.setValueAtTime(c,s),h.type="highpass",h.frequency.setValueAtTime(.5*c,s),h.Q.setValueAtTime(.5,s);var p=.08*this.musicVolume;u.gain.setValueAtTime(p,s),u.gain.exponentialRampToValueAtTime(.001,s+.2),l.connect(h),h.connect(u),u.connect(this.musicGain),l.start(s),l.stop(s+.2)}}},{key:"playFiddle",value:function(e,t,a){var i=this,n=[2*e.notes[0],2*e.notes[1],2*e.notes[2],2.5*e.notes[0]],r=t/4;n.forEach(function(e,t){if(Math.random()<.6){var n=a+t*r,s=i.context.createOscillator(),o=i.context.createGain(),c=i.context.createBiquadFilter();s.type="sawtooth",s.frequency.setValueAtTime(e,n);var l=i.context.createOscillator(),u=i.context.createGain();l.type="sine",l.frequency.setValueAtTime(6,n),u.gain.setValueAtTime(.02*e,n),l.connect(u),u.connect(s.frequency),c.type="bandpass",c.frequency.setValueAtTime(1.5*e,n),c.Q.setValueAtTime(2,n);var h=.1*i.musicVolume;o.gain.setValueAtTime(0,n),o.gain.linearRampToValueAtTime(h,n+.1),o.gain.setValueAtTime(.8*h,n+.7*r),o.gain.exponentialRampToValueAtTime(.001,n+r),s.connect(c),c.connect(o),o.connect(i.musicGain),s.start(n),l.start(n),s.stop(n+r),l.stop(n+r)}})}},{key:"playSimpleDrums",value:function(e,t){for(var a=e/4,i=0;i<4;i++){var n=t+i*a;0!==i&&2!==i||this.playKickDrum(n),1!==i&&3!==i||this.playSnare(n),Math.random()<.4&&this.playHiHat(n+a/2)}}},{key:"playRandomMelody",value:function(e,t,a){for(var i=3+Math.floor(4*Math.random()),n=(t-1)/i,r=this.getChordMelodyNotes(e),s=0;s<i;s++){var o=a+s*n,c=r[Math.floor(Math.random()*r.length)];Math.random()<.2||this.playMelodyNote(c,.8*n,o)}}},{key:"getChordMelodyNotes",value:function(e){var t=[];e.forEach(function(e){t.push(2*e),t.push(1.5*e),4*e<1e3&&t.push(4*e)});var a=e[0];return t.push(1.125*a),t.push(1.25*a),t.push(1.5*a),t.push(1.67*a),t.push(1.875*a),t.push(2.25*a),t.push(2.5*a),t.push(3*a),t.filter(function(e){return e>=200&&e<=1e3})}},{key:"playPolyrhythms",value:function(e,t,a){var i=.5;this.playTripletLayer(e,t,a,i),this.playOffbeatLayer(e,t,a,i),this.playSixteenthLayer(e,t,a,i),this.playDrumLayer(t,a,i),this.playCymbalLayer(t,a,i)}},{key:"playTripletLayer",value:function(e,t,a,i){for(var n=i/3,r=Math.floor(t/n),s=0;s<r;s++)if(Math.random()<.4){var o=a+s*n,c=e[s%e.length]*(1+.5*Math.random());this.playPolyrhythmNote(c,.7*n,o,"triplet")}}},{key:"playOffbeatLayer",value:function(e,t,a,i){for(var n=Math.floor(t/i),r=0;r<n;r++)if(Math.random()<.6){var s=a+r*i+i/2,o=1.5*e[(r+1)%e.length];this.playPolyrhythmNote(o,.3*i,s,"offbeat")}}},{key:"playSixteenthLayer",value:function(e,t,a,i){for(var n=i/4,r=Math.floor(t/n),s=0;s<r;s++)if(Math.random()<.15){var o=a+s*n,c=2*e[Math.floor(Math.random()*e.length)];this.playPolyrhythmNote(c,.8*n,o,"sixteenth")}}},{key:"playPolyrhythmNote",value:function(e,t,a,i){var n=this.context.createOscillator(),r=this.context.createGain(),s=this.context.createBiquadFilter();switch(i){case"triplet":n.type="triangle",s.type="bandpass",s.frequency.setValueAtTime(1.5*e,a),s.Q.setValueAtTime(3,a);break;case"offbeat":n.type="sawtooth",s.type="highpass",s.frequency.setValueAtTime(.8*e,a),s.Q.setValueAtTime(1,a);break;case"sixteenth":n.type="sine",s.type="lowpass",s.frequency.setValueAtTime(2*e,a),s.Q.setValueAtTime(2,a)}n.frequency.setValueAtTime(e,a);var o=.08*this.musicVolume;r.gain.setValueAtTime(0,a),r.gain.linearRampToValueAtTime(o,a+.02),r.gain.exponentialRampToValueAtTime(.001,a+t),n.connect(s),s.connect(r),r.connect(this.musicGain),n.start(a),n.stop(a+t)}},{key:"playDrumLayer",value:function(e,t,a){for(var i=Math.floor(e/a),n=0;n<i;n++){var r=t+n*a;n%2===0&&Math.random()<.6&&this.playKickDrum(r),n%2===1&&Math.random()<.7&&this.playSnare(r);for(var s=0;s<2;s++){var o=r+s*a/2;Math.random()<.4&&this.playHiHat(o)}}}},{key:"playCymbalLayer",value:function(e,t,a){for(var i=Math.floor(e/a),n=0;n<i;n++)0===n&&Math.random()<.2&&this.playCrashCymbal(t+n*a),Math.random()<.3&&this.playRideCymbal(t+n*a)}},{key:"playKickDrum",value:function(e){var t=this.context.createOscillator(),a=this.context.createGain(),i=this.context.createBiquadFilter();t.type="sine",t.frequency.setValueAtTime(60,e),t.frequency.exponentialRampToValueAtTime(40,e+.1),i.type="lowpass",i.frequency.setValueAtTime(120,e),i.Q.setValueAtTime(1,e);var n=.15*this.musicVolume;a.gain.setValueAtTime(n,e),a.gain.exponentialRampToValueAtTime(.001,e+.2),t.connect(i),i.connect(a),a.connect(this.musicGain),t.start(e),t.stop(e+.2)}},{key:"playSnare",value:function(e){for(var t=.1*this.context.sampleRate,a=this.context.createBuffer(1,t,this.context.sampleRate),i=a.getChannelData(0),n=0;n<t;n++){var r=n/t,s=Math.exp(40*-r);i[n]=(2*Math.random()-1)*s}var o=this.context.createBufferSource(),c=this.context.createBiquadFilter(),l=this.context.createGain();o.buffer=a,c.type="highpass",c.frequency.setValueAtTime(300,e),c.Q.setValueAtTime(1,e);var u=.12*this.musicVolume;l.gain.setValueAtTime(u,e),o.connect(c),c.connect(l),l.connect(this.musicGain),o.start(e)}},{key:"playHiHat",value:function(e){for(var t=.05*this.context.sampleRate,a=this.context.createBuffer(1,t,this.context.sampleRate),i=a.getChannelData(0),n=0;n<t;n++){var r=n/t,s=Math.exp(60*-r);i[n]=(2*Math.random()-1)*s*.5}var o=this.context.createBufferSource(),c=this.context.createBiquadFilter(),l=this.context.createGain();o.buffer=a,c.type="highpass",c.frequency.setValueAtTime(8e3,e),c.Q.setValueAtTime(2,e);var u=.08*this.musicVolume;l.gain.setValueAtTime(u,e),o.connect(c),c.connect(l),l.connect(this.musicGain),o.start(e)}},{key:"playCrashCymbal",value:function(e){for(var t=.8*this.context.sampleRate,a=this.context.createBuffer(1,t,this.context.sampleRate),i=a.getChannelData(0),n=0;n<t;n++){var r=n/t,s=Math.exp(3*-r);i[n]=(2*Math.random()-1)*s*.3}var o=this.context.createBufferSource(),c=this.context.createBiquadFilter(),l=this.context.createGain();o.buffer=a,c.type="bandpass",c.frequency.setValueAtTime(5e3,e),c.Q.setValueAtTime(.5,e);var u=.1*this.musicVolume;l.gain.setValueAtTime(u,e),o.connect(c),c.connect(l),l.connect(this.musicGain),o.start(e)}},{key:"playRideCymbal",value:function(e){var t=this.context.createOscillator(),a=this.context.createGain(),i=this.context.createBiquadFilter();t.type="triangle",t.frequency.setValueAtTime(3e3,e),t.frequency.linearRampToValueAtTime(2500,e+.3),i.type="bandpass",i.frequency.setValueAtTime(4e3,e),i.Q.setValueAtTime(3,e);var n=.06*this.musicVolume;a.gain.setValueAtTime(0,e),a.gain.linearRampToValueAtTime(n,e+.01),a.gain.exponentialRampToValueAtTime(.001,e+.4),t.connect(i),i.connect(a),a.connect(this.musicGain),t.start(e),t.stop(e+.4)}},{key:"playMelodyNote",value:function(e,t,a){var i=this.context.createOscillator(),n=this.context.createOscillator(),r=this.context.createBiquadFilter(),s=this.context.createGain(),o=this.context.createOscillator(),c=this.context.createGain();i.type="sawtooth",i.frequency.setValueAtTime(e,a),n.type="triangle",n.frequency.setValueAtTime(2*e,a),o.type="sine",o.frequency.setValueAtTime(5,a),c.gain.setValueAtTime(.01*e,a),o.connect(c),c.connect(i.frequency),r.type="bandpass",r.frequency.setValueAtTime(1.5*e,a),r.Q.setValueAtTime(2,a);var l=this.context.createGain();l.gain.setValueAtTime(.3,a),i.connect(r),n.connect(l),l.connect(r),r.connect(s),s.connect(this.musicGain),s.gain.setValueAtTime(0,a),s.gain.linearRampToValueAtTime(.15*this.musicVolume,a+.1),s.gain.setValueAtTime(.12*this.musicVolume,a+.8*t),s.gain.exponentialRampToValueAtTime(.001,a+t),i.start(a),n.start(a),o.start(a),i.stop(a+t),n.stop(a+t),o.stop(a+t)}},{key:"stopCurrentMusic",value:function(){if(this.currentMusicSource){try{this.currentMusicSource.stop()}catch(e){}this.currentMusicSource=null}this.currentMusic=null}},{key:"playNextTrackManual",value:function(){this.musicFiles&&0!==this.musicFiles.length&&(this.stopCurrentMusic(),this.currentTrackIndex=(this.currentTrackIndex+1)%this.musicFiles.length,this.currentMusic={melody:"audio_files",type:"background",startTime:this.context?this.context.currentTime:0},this.playNextAudioTrack())}},{key:"playPreviousTrack",value:function(){this.musicFiles&&0!==this.musicFiles.length&&(this.currentTrackIndex=this.currentTrackIndex-1,this.currentTrackIndex<0&&(this.currentTrackIndex=this.musicFiles.length-1),this.stopCurrentMusic(),this.startBackgroundMusic())}},{key:"toggleMusicPause",value:function(){this.isMusicPaused?(this.startBackgroundMusic(),this.isMusicPaused=!1):(this.stopCurrentMusic(),this.isMusicPaused=!0)}},{key:"getCurrentTrackInfo",value:function(){if(!this.musicFiles||0===this.musicFiles.length)return{name:"No tracks loaded",index:0,total:0};var e=this.musicFiles[this.currentTrackIndex];return{name:e?e.replace(/^.*\//,"").replace(/\.[^/.]+$/,""):"Unknown",index:this.currentTrackIndex+1,total:this.musicFiles.length,isPaused:this.isMusicPaused||!1}}},{key:"setMasterVolume",value:function(e){this.masterVolume=Math.max(0,Math.min(1,e)),this.masterGain&&(this.masterGain.gain.value=this.masterVolume)}},{key:"setSfxVolume",value:function(e){this.sfxVolume=Math.max(0,Math.min(1,e))}},{key:"setMusicVolume",value:function(e){this.musicVolume=Math.max(0,Math.min(1,e))}},{key:"mute",value:function(){this.isMuted=!0,this.masterGain&&(this.masterGain.gain.value=0)}},{key:"unmute",value:function(){this.isMuted=!1,this.masterGain&&(this.masterGain.gain.value=this.masterVolume)}},{key:"toggleMute",value:function(){return this.isMuted?this.unmute():this.mute(),!this.isMuted}}],t&&m(e.prototype,t),a&&m(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach(function(t){x(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function x(e,t,a){return(t=O(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=w(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,n,r,s,o=[],c=!0,l=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(i=r.call(a)).done)&&(o.push(i.value),o.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(l)throw n}}return o}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return S(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function A(){var e,t,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function r(a,i,n,r){var c=i&&i.prototype instanceof o?i:o,l=Object.create(c.prototype);return V(l,"_invoke",function(a,i,n){var r,o,c,l=0,u=n||[],h=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,a){return r=t,o=0,c=e,p.n=a,s}};function d(a,i){for(o=a,c=i,t=0;!h&&l&&!n&&t<u.length;t++){var n,r=u[t],d=p.p,m=r[2];a>3?(n=m===i)&&(c=r[(o=r[4])?5:(o=3,3)],r[4]=r[5]=e):r[0]<=d&&((n=a<2&&d<r[1])?(o=0,p.v=i,p.n=r[1]):d<m&&(n=a<3||r[0]>i||i>m)&&(r[4]=a,r[5]=i,p.n=m,o=0))}if(n||a>1)return s;throw h=!0,i}return function(n,u,m){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&d(u,m),o=u,c=m;(t=o<2?e:c)||!h;){r||(o?o<3?(o>1&&(p.n=-1),d(o,c)):p.n=c:p.v=c);try{if(l=2,r){if(o||(n="next"),t=r[n]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=r.return)&&t.call(r),o<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),o=1);r=e}else if((t=(h=p.n<0)?c:a.call(i,p))!==s)break}catch(t){r=e,o=1,c=t}finally{l=1}}return{value:t,done:h}}}(a,n,r),!0),l}var s={};function o(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][i]?t(t([][i]())):(V(t={},i,function(){return this}),t),h=l.prototype=o.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,V(e,n,"GeneratorFunction")),e.prototype=Object.create(h),e}return c.prototype=l,V(h,"constructor",l),V(l,"constructor",c),c.displayName="GeneratorFunction",V(l,n,"GeneratorFunction"),V(h),V(h,n,"Generator"),V(h,i,function(){return this}),V(h,"toString",function(){return"[object Generator]"}),(A=function(){return{w:r,m:p}})()}function V(e,t,a,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}V=function(e,t,a,i){function r(t,a){V(e,t,function(e){return this._invoke(t,a,e)})}t?n?n(e,t,{value:a,enumerable:!i,configurable:!i,writable:!i}):e[t]=a:(r("next",0),r("throw",1),r("return",2))},V(e,t,a,i)}function M(e,t,a,i,n,r,s){try{var o=e[r](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(i,n)}function q(e){return function(){var t=this,a=arguments;return new Promise(function(i,n){var r=e.apply(t,a);function s(e){M(r,i,n,s,o,"next",e)}function o(e){M(r,i,n,s,o,"throw",e)}s(void 0)})}}function G(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,O(i.key),i)}}function O(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var E=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.startScreen=document.getElementById("startScreen"),this.gameOverScreen=document.getElementById("gameOver"),this.scoreElement=document.getElementById("scoreValue"),this.livesElement=document.getElementById("livesValue"),this.finalScoreElement=document.getElementById("finalScore"),this.gameOverTitle=document.getElementById("gameOverTitle"),this.levelElement=document.getElementById("levelValue"),this.multiplierElement=document.getElementById("multiplierValue"),this.comboElement=document.getElementById("comboValue"),this.comboDisplay=document.getElementById("comboDisplay"),this.powerupDisplay=document.getElementById("powerupDisplay"),this.playerNameInput=document.getElementById("playerName"),this.highScoresScreen=document.getElementById("highScoresScreen"),this.highScoresList=document.getElementById("highScoresList"),this.gameState="start",this.score=0,this.lives=10,this.level=1,this.combo=0,this.multiplier=1,this.balls=[],this.bricks=[],this.powerUps=[],this.particles=[],this.cavityBalls=new Set,this.cavityTimers=new Map,this.originalSpeeds=new Map,this.keys={},this.highScoreManager=new c,this.displayHighScores(),this.audioManager=new f,this.musicStarted=!1,this.backgroundImage=new Image,this.backgroundImage.src="./assets/img/background.webp",this.powerUpIcons={},this.loadPowerUpIcons(),this.backgroundImageLoaded=!1,this.backgroundImage.onload=function(){t.backgroundImageLoaded=!0},this.resizeCanvas(),this.initializeGame(),this.setupEventListeners(),this.gameLoop()},t=[{key:"init",value:function(){var e=q(A().m(function e(){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve())},e)}));return function(){return e.apply(this,arguments)}}()},{key:"resizeCanvas",value:function(){var e=this;this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",function(){e.canvas.width=window.innerWidth,e.canvas.height=window.innerHeight,e.initializeGame()})}},{key:"handleResize",value:function(){this.resizeCanvas()}},{key:"initializeGame",value:function(){var e=Math.min(this.canvas.width,this.canvas.height)/800;this.paddle={x:this.canvas.width/2-60*e,y:this.canvas.height-50*e,width:120*e,height:15*e,speed:8*e,powerUps:{}},this.ball={x:this.canvas.width/2,y:this.canvas.height/2,radius:12*e,speedX:2*e,speedY:-2*e,powerUps:{}},this.balls=[this.ball],this.createBricks()}},{key:"createBricks",value:function(){this.bricks=[];for(var e=Math.min(this.canvas.width,this.canvas.height)/800,t=75*e,a=20*e,i=5*e,n=Math.floor((this.canvas.width-2*i)/(t+i)),r=0;r<8;r++)for(var s=0;s<n;s++)this.bricks.push({x:i+s*(t+i),y:i+100*e+r*(a+i),width:t,height:a,visible:!0,hits:1,color:this.getBrickColor(r)})}},{key:"loadPowerUpIcons",value:function(){for(var e=0,t=Object.entries({dynamite:"cactus.svg",sheriff_badge:"badge.svg",horseshoe:"hat.svg",boots:"boot-and-spur.svg",whiskey:"whiskybottle.svg"});e<t.length;e++){var a=k(t[e],2),i=a[0],n=a[1],r=new Image;r.src="./assets/images/powerups/"+n,this.powerUpIcons[i]=r}}},{key:"getBrickColor",value:function(e){var t=["#dc143c","#ff6600","#ffd700","#00ff7f","#00ffff","#8a2be2","#ff69b4","#deb887"];return t[e%t.length]}},{key:"setupEventListeners",value:function(){var e=this,t=function(){var t=q(A().m(function t(){return A().w(function(t){for(;;)switch(t.n){case 0:if(e.musicStarted){t.n=2;break}return e.musicStarted=!0,t.n=1,e.audioManager.startBackgroundMusic();case 1:case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();document.addEventListener("keydown",function(a){if(e.keys[a.code]=!0,t(),"Space"===a.code)if(a.preventDefault(),"start"===e.gameState){if(0===e.playerNameInput.value.trim().length)return e.playerNameInput.style.border="3px solid #dc143c",e.playerNameInput.placeholder="ENTER YER NAME, PARTNER!",e.audioManager.playSound("ballLost"),void setTimeout(function(){e.playerNameInput.style.border="",e.playerNameInput.placeholder="ENTER YER NAME"},2e3);e.audioManager.playSound("menuConfirm"),e.startGame()}else"gameOver"===e.gameState?(e.audioManager.playSound("menuConfirm"),e.resetGame()):"highScores"===e.gameState&&(e.audioManager.playSound("menuSelect"),e.hideHighScores());else"KeyH"===a.code?document.activeElement!==e.playerNameInput&&(a.preventDefault(),"gameOver"!==e.gameState&&"start"!==e.gameState||(e.audioManager.playSound("menuSelect"),e.showHighScores())):"KeyM"===a.code?document.activeElement!==e.playerNameInput&&(a.preventDefault(),e.audioManager.toggleMute()):"KeyS"===a.code&&document.activeElement!==e.playerNameInput&&(a.preventDefault(),e.audioManager.playNextTrackManual(),e.audioManager.playSound("menuSelect"))}),document.addEventListener("keyup",function(t){e.keys[t.code]=!1}),this.canvas.addEventListener("mousemove",function(t){if("playing"===e.gameState){var a=e.canvas.getBoundingClientRect(),i=t.clientX-a.left;e.paddle.x=i-e.paddle.width/2,e.paddle.x<0&&(e.paddle.x=0),e.paddle.x+e.paddle.width>e.canvas.width&&(e.paddle.x=e.canvas.width-e.paddle.width)}}),document.addEventListener("click",t),document.addEventListener("input",t)}},{key:"startGame",value:function(){this.gameState="playing",this.startScreen.classList.add("hidden"),this.gameOverScreen.classList.add("hidden"),document.body.classList.add("playing"),this.start()}},{key:"resetGame",value:function(){this.score=0,this.lives=10,this.level=1,this.combo=0,this.multiplier=1,this.gameState="start",this.startScreen.classList.remove("hidden"),this.gameOverScreen.classList.add("hidden"),document.body.classList.remove("playing"),this.initializeGame()}},{key:"start",value:function(){this.gameStarted=!0,this.lastTime=performance.now()}},{key:"pause",value:function(){this.gameStarted=!1}},{key:"resume",value:function(){this.gameStarted=!0,this.lastTime=performance.now()}},{key:"togglePause",value:function(){this.gameStarted?this.pause():this.resume()}},{key:"gameLoop",value:function(){var e=this,t=performance.now();this.gameStarted&&(this.update(),this.render()),this.lastTime=t,requestAnimationFrame(function(){return e.gameLoop()})}},{key:"update",value:function(){"playing"===this.gameState&&(this.updatePaddle(),this.updateBalls(),this.updatePowerUps(),this.updateParticles(),this.checkCollisions(),this.checkGameState(),this.updateUI())}},{key:"updatePaddle",value:function(){(this.keys.ArrowLeft||this.keys.KeyA)&&this.paddle.x>0&&(this.paddle.x-=this.paddle.speed),(this.keys.ArrowRight||this.keys.KeyD)&&this.paddle.x<this.canvas.width-this.paddle.width&&(this.paddle.x+=this.paddle.speed)}},{key:"updateBalls",value:function(){for(var e=this.balls.length-1;e>=0;e--){var t=this.balls[e];t.x+=t.speedX,t.y+=t.speedY;var a=this.cavityBalls.has(t),i=t.y<80;if(i&&!a?(this.cavityBalls.add(t),this.score+=50,this.createParticles(t.x,t.y,"#ffd700",8),this.originalSpeeds.set(t,{speedX:t.speedX,speedY:t.speedY}),t.speedX*=1.8,t.speedY*=1.8):!i&&a&&(this.cavityBalls.delete(t),this.cavityTimers.set(t,Date.now()+5e3)),this.cavityTimers.has(t)&&Date.now()>this.cavityTimers.get(t)&&(this.cavityTimers.delete(t),this.originalSpeeds.has(t))){var n=this.originalSpeeds.get(t);t.speedX=n.speedX,t.speedY=n.speedY,this.originalSpeeds.delete(t)}(t.x<=t.radius||t.x>=this.canvas.width-t.radius)&&(t.speedX=-t.speedX),t.y<=t.radius&&(t.speedY=-t.speedY),t.y>=this.canvas.height-t.radius&&(this.balls.splice(e,1),this.cavityBalls.delete(t),this.cavityTimers.delete(t),this.originalSpeeds.delete(t),this.createParticles(t.x,t.y,"#ff0000",10),this.audioManager.playSound("ballLost"))}0===this.balls.length&&(this.lives--,this.lives<=0?this.gameOver():this.resetBall())}},{key:"updatePowerUps",value:function(){for(var e=this.powerUps.length-1;e>=0;e--){var t=this.powerUps[e];t.y+=2,t.y>this.canvas.height?this.powerUps.splice(e,1):t.x<this.paddle.x+this.paddle.width&&t.x+t.width>this.paddle.x&&t.y<this.paddle.y+this.paddle.height&&t.y+t.height>this.paddle.y&&(this.applyPowerUp(t.type),this.powerUps.splice(e,1),this.createParticles(t.x,t.y,t.color,15),this.score+=250,this.audioManager.playSound("powerUpCollect"))}}},{key:"updateParticles",value:function(){for(var e=this.particles.length-1;e>=0;e--){var t=this.particles[e];t.x+=t.vx,t.y+=t.vy,t.life-=t.decay,t.life<=0&&this.particles.splice(e,1)}}},{key:"checkCollisions",value:function(){var e,t=b(this.balls);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.y+a.radius>=this.paddle.y&&a.x>=this.paddle.x&&a.x<=this.paddle.x+this.paddle.width&&a.speedY>0){var i=(a.x-(this.paddle.x+this.paddle.width/2))/(this.paddle.width/2);a.speedX=5*i,a.speedY=-Math.abs(a.speedY),this.audioManager.playSound("paddleHit")}var n,r=b(this.bricks);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s.visible&&a.x>=s.x&&a.x<=s.x+s.width&&a.y>=s.y&&a.y<=s.y+s.height){this.hitBrick(s,a);break}}}catch(o){r.e(o)}finally{r.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"hitBrick",value:function(e,t){var a=this,i=[],n=t.powerUps.spike&&t.powerUps.spike>Date.now();if(n){i.push(e);for(var r={x:Math.sign(t.speedX),y:Math.sign(t.speedY)},s=e,o=0;o<2;o++){var c=this.findNextBrick(s,r);if(!c||!c.visible)break;i.push(c),s=c}}else i.push(e);i.forEach(function(i){i.visible=!1;var r=100*a.multiplier,s=a.cavityBalls.has(t)||a.cavityTimers.has(t);s&&(r*=2),a.score+=r,a.combo++,a.audioManager.playBrickBreak(),a.audioManager.playComboSound(a.combo);var o=n||s?15:10,c=s?"#ffd700":i.color;a.createParticles(i.x+i.width/2,i.y+i.height/2,c,o),i===e&&Math.random()<.08&&a.powerUps.length<2&&a.createPowerUp(i.x+i.width/2,i.y+i.height/2)}),this.combo>5&&(this.multiplier=Math.min(5,Math.floor(this.combo/5)+1)),n||(t.speedY=-t.speedY)}},{key:"checkGameState",value:function(){0===this.bricks.filter(function(e){return e.visible}).length&&this.levelComplete()}},{key:"levelComplete",value:function(){this.level++,this.combo=0,this.multiplier=1;var e=1e3*this.level;this.score+=e,this.audioManager.playSound("levelComplete"),this.createBricks(),this.resetBall()}},{key:"resetBall",value:function(){var e=Math.min(this.canvas.width,this.canvas.height)/800;this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height/2,this.ball.speedX=2*(Math.random()>.5?1:-1)*e,this.ball.speedY=-2*e,this.ball.powerUps={},this.paddle.powerUps={},this.paddle.width=120*e,this.balls=[this.ball]}},{key:"gameOver",value:function(){var e=q(A().m(function e(){var t,a;return A().w(function(e){for(;;)switch(e.n){case 0:this.gameState="gameOver",document.body.classList.remove("playing"),this.audioManager.playSound("gameOver"),this.highScoreManager.isHighScore(this.score)?(t=this.playerNameInput.value.trim()||"OUTLAW",a=this.highScoreManager.addHighScore(t,this.score,this.level),this.gameOverTitle.textContent="NEW HIGH SCORE! RANK #".concat(a),this.gameOverTitle.classList.add("win"),this.displayHighScores()):(this.gameOverTitle.textContent="GAME OVER",this.gameOverTitle.classList.remove("win")),this.gameOverScreen.classList.remove("hidden"),this.finalScoreElement.textContent="Final Score: ".concat(this.score.toLocaleString());case 1:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createParticles",value:function(e,t,a){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=0;n<i;n++)this.particles.push({x:e,y:t,vx:8*(Math.random()-.5),vy:8*(Math.random()-.5),color:a,size:4*Math.random()+2,life:1,decay:.02*Math.random()+.01})}},{key:"createPowerUp",value:function(e,t){var a=["dynamite","whiskey","horseshoe","boots","sheriff_badge"],i=Math.floor(Math.random()*a.length);this.powerUps.push({x:e-30,y:t,width:60,height:60,type:a[i],color:["#8b4513","#d2691e","#c0c0c0","#654321","#ffd700"][i]})}},{key:"applyPowerUp",value:function(e){switch(e){case"dynamite":if(this.balls.length<5){var t=T({},this.ball);t.speedX=-t.speedX,t.powerUps=T({},this.ball.powerUps),this.balls.push(t)}break;case"whiskey":this.paddle.width*=1.5;break;case"boots":this.balls.forEach(function(e){e.speedX*=1.5,e.speedY*=1.5});break;case"sheriff_badge":this.balls.forEach(function(e){e.powerUps.spike=Date.now()+1e4}),this.audioManager.startSpikeMusic();break;case"horseshoe":this.balls.forEach(function(e){e.speedX*=.5,e.speedY*=.5})}}},{key:"updateUI",value:function(){this.scoreElement&&(this.scoreElement.textContent=this.score.toLocaleString()),this.livesElement&&(this.livesElement.textContent=this.lives),this.levelElement&&(this.levelElement.textContent="LEVEL ".concat(this.level)),this.comboElement&&(this.comboElement.textContent=this.combo),this.multiplierElement&&(this.multiplierElement.textContent="x".concat(this.multiplier))}},{key:"render",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.backgroundImageLoaded?this.ctx.drawImage(this.backgroundImage,0,0,this.canvas.width,this.canvas.height):(this.ctx.fillStyle="#2d1810",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height));var e,t=b(this.bricks);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.visible&&this.drawWoodBrick(a)}}catch(w){t.e(w)}finally{t.f()}var i=this.ctx.createLinearGradient(this.paddle.x,this.paddle.y,this.paddle.x,this.paddle.y+this.paddle.height);i.addColorStop(0,"#deb887"),i.addColorStop(.5,"#8b7355"),i.addColorStop(1,"#654321"),this.ctx.fillStyle=i,this.ctx.fillRect(this.paddle.x,this.paddle.y,this.paddle.width,this.paddle.height);var n,r=b(this.balls);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s.powerUps.spike&&s.powerUps.spike>Date.now()){this.ctx.fillStyle="#ff6600",this.ctx.strokeStyle="#ff3300",this.ctx.lineWidth=2,this.ctx.beginPath();for(var o=0;o<8;o++){var c=o*Math.PI*2/8,l=s.x+Math.cos(c)*s.radius*.7,u=s.y+Math.sin(c)*s.radius*.7,h=s.x+Math.cos(c)*s.radius*1.3,p=s.y+Math.sin(c)*s.radius*1.3;0===o?this.ctx.moveTo(l,u):this.ctx.lineTo(l,u),this.ctx.lineTo(h,p)}this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle="#ffaa00",this.ctx.beginPath(),this.ctx.arc(s.x,s.y,.6*s.radius,0,2*Math.PI),this.ctx.fill()}else{if(this.cavityBalls.has(s)||this.cavityTimers.has(s)){this.ctx.shadowBlur=15,this.ctx.shadowColor="#ffd700";var d=this.ctx.createRadialGradient(s.x-.3*s.radius,s.y-.3*s.radius,0,s.x,s.y,s.radius);d.addColorStop(0,"#fff700"),d.addColorStop(.4,"#ffd700"),d.addColorStop(1,"#cc9900"),this.ctx.fillStyle=d}else{var m=this.ctx.createRadialGradient(s.x-.3*s.radius,s.y-.3*s.radius,0,s.x,s.y,s.radius);m.addColorStop(0,"#c0c0c0"),m.addColorStop(.4,"#808080"),m.addColorStop(1,"#404040"),this.ctx.fillStyle=m}this.ctx.beginPath(),this.ctx.arc(s.x,s.y,s.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent"}}}catch(w){r.e(w)}finally{r.f()}var y,f=b(this.powerUps);try{for(f.s();!(y=f.n()).done;){var v=y.value;this.ctx.save();var g=this.powerUpIcons[v.type];g&&g.complete?this.ctx.drawImage(g,v.x,v.y,v.width,v.height):(this.ctx.fillStyle=v.color,this.ctx.beginPath(),this.ctx.arc(v.x+v.width/2,v.y+v.height/2,v.width/2,0,2*Math.PI),this.ctx.fill()),this.ctx.restore()}}catch(w){f.e(w)}finally{f.f()}var T,x=b(this.particles);try{for(x.s();!(T=x.n()).done;){var k=T.value;this.ctx.globalAlpha=k.life,this.ctx.fillStyle=k.color,this.ctx.beginPath(),this.ctx.arc(k.x,k.y,k.size,0,2*Math.PI),this.ctx.fill()}}catch(w){x.e(w)}finally{x.f()}this.ctx.globalAlpha=1}},{key:"drawWoodBrick",value:function(e){var t=this.ctx,a=e.x,i=e.y,n=e.width,r=e.height,s=e.color,o=this.darkenColor(s,.3);t.fillStyle=o,t.fillRect(a,i,n,r),t.strokeStyle=this.darkenColor(o,.2),t.lineWidth=.5,t.globalAlpha=.6;for(var c=Math.floor(r/3),l=0;l<c;l++){var u=i+(l+1)*(r/(c+1)),h=2*Math.random()-1;t.beginPath(),t.moveTo(a+2,u+h);for(var p=0;p<=n-4;p+=4){var d=u+h+.5*Math.sin(p/n*Math.PI*2);t.lineTo(a+2+p,d)}t.stroke()}t.globalAlpha=1,t.fillStyle=s,t.globalAlpha=.7,t.fillRect(a+1,i+1,n-2,r-2),t.globalAlpha=1,t.strokeStyle=this.darkenColor(s,.4),t.lineWidth=1,t.beginPath(),t.moveTo(a,i);for(var m=0;m<=n;m+=2){var y=.5*Math.random();t.lineTo(a+m,i+y)}for(var f=0;f<=r;f+=2){var v=.5*Math.random();t.lineTo(a+n-v,i+f)}for(var g=n;g>=0;g-=2){var T=.5*Math.random();t.lineTo(a+g,i+r-T)}for(var x=r;x>=0;x-=2){var b=.5*Math.random();t.lineTo(a+b,i+x)}if(t.closePath(),t.stroke(),Math.random()<.3){t.fillStyle=this.darkenColor(o,.5);var k=a+2+Math.random()*(n-4),w=i+2+Math.random()*(r-4);t.beginPath(),t.arc(k,w,.5,0,2*Math.PI),t.fill()}t.strokeStyle=this.lightenColor(s,.3),t.lineWidth=1,t.globalAlpha=.8,t.beginPath(),t.moveTo(a+1,i+1),t.lineTo(a+n-1,i+1),t.stroke(),t.strokeStyle=this.darkenColor(o,.3),t.beginPath(),t.moveTo(a+1,i+r-1),t.lineTo(a+n-1,i+r-1),t.stroke(),t.globalAlpha=1}},{key:"darkenColor",value:function(e,t){var a=e.replace("#",""),i=Math.max(0,parseInt(a.substr(0,2),16)*(1-t)),n=Math.max(0,parseInt(a.substr(2,2),16)*(1-t)),r=Math.max(0,parseInt(a.substr(4,2),16)*(1-t));return"rgb(".concat(Math.floor(i),", ").concat(Math.floor(n),", ").concat(Math.floor(r),")")}},{key:"lightenColor",value:function(e,t){var a=e.replace("#",""),i=Math.min(255,parseInt(a.substr(0,2),16)*(1+t)),n=Math.min(255,parseInt(a.substr(2,2),16)*(1+t)),r=Math.min(255,parseInt(a.substr(4,2),16)*(1+t));return"rgb(".concat(Math.floor(i),", ").concat(Math.floor(n),", ").concat(Math.floor(r),")")}},{key:"getGameState",value:function(){return{score:this.score,lives:this.lives,level:this.level,combo:this.combo,multiplier:this.multiplier,gameState:this.gameState}}},{key:"displayHighScores",value:function(){this.highScoresList&&(this.highScoresList.innerHTML=this.highScoreManager.generateHighScoresHTML())}},{key:"showHighScores",value:function(){this.gameState="highScores",this.startScreen.classList.add("hidden"),this.gameOverScreen.classList.add("hidden"),this.highScoresScreen.classList.remove("hidden"),this.displayHighScores()}},{key:"hideHighScores",value:function(){this.highScoresScreen.classList.add("hidden"),this.gameState="start",this.startScreen.classList.remove("hidden")}},{key:"findNextBrick",value:function(e,t){var a=Math.min(this.canvas.width,this.canvas.height)/800,i=75*a,n=20*a,r=5*a,s=e.x+t.x*(i+r),o=e.y+t.y*(n+r);return this.bricks.find(function(e){return e.visible&&Math.abs(e.x-s)<i/2&&Math.abs(e.y-o)<n/2})}}],t&&G(e.prototype,t),a&&G(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();const B=E}}]);
//# sourceMappingURL=382.b1f8177aa06c45bc792f.js.map